{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block styles %}
<style>
    .table .table-danger, .table .table-danger > th, .table .table-danger > td { background-color: #58151c !important; color: #fff !important; --bs-table-border-color: #a62f3a; }
    .stock-control { display: flex; align-items: center; justify-content: center; min-width: 90px; }
    .stock-control .btn { padding: .1rem .4rem; font-size: .8rem; }
    .stat-card .display-4 { color: var(--primary-accent); }
</style>
{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="mb-0">Dashboard</h1>
    {% if session.rol == 'admin' %}
    <div>
        <a href="{{ url_for('ver_archivados') }}" class="btn btn-outline-secondary">
            <i class="bi bi-archive-fill me-1"></i> Ver Archivados
        </a>
        <a href="{{ url_for('agregar_producto') }}" class="btn btn-primary ms-2">
            <i class="bi bi-plus-circle me-1"></i> Añadir Producto
        </a>
    </div>
    {% endif %}
</div>
<p class="text-white-50 mb-4">Un resumen del estado actual de tu inventario activo.</p>
<div class="table-responsive">
    <table class="table table-hover table-striped align-middle mb-0">
        <thead class="table-dark">
            </thead>
        <tbody id="inventory-table-body">
            {% for producto in inventario %}
            <tr>
                {% if session.rol == 'admin' %}
                <td class="text-end">
                    <a href="{{ url_for('editar_producto', producto_id=producto.id) }}" class="btn btn-warning btn-sm" title="Editar"><i class="bi bi-pencil-fill"></i></a>
                    <form action="{{ url_for('eliminar_producto', producto_id=producto.id) }}" method="POST" class="d-inline" onsubmit="return confirm('¿Estás seguro de que quieres archivar este producto?');">
                        <button type="submit" class="btn btn-secondary btn-sm ms-1" title="Archivar">
                            <i class="bi bi-archive-fill"></i>
                        </button>
                    </form>
                </td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
{% block scripts %}
{% endblock %}